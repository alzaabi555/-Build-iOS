<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>محول أيقونة راصد</title>
    <style>
        body { font-family: system-ui, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #f0f2f5; margin: 0; }
        .preview { margin-bottom: 30px; filter: drop-shadow(0 20px 30px rgba(79, 70, 229, 0.2)); transition: transform 0.3s; }
        .preview:hover { transform: scale(1.05); }
        button { padding: 18px 40px; font-size: 18px; font-weight: 800; color: white; background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%); border: none; border-radius: 16px; cursor: pointer; transition: all 0.2s; box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3); display: flex; align-items: center; gap: 10px; }
        button:hover { transform: translateY(-3px); box-shadow: 0 15px 25px rgba(79, 70, 229, 0.4); }
        button:active { transform: translateY(0); }
        p { color: #64748b; margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h1 style="color: #1e293b; margin-bottom: 40px;">أيقونة راصد الجديدة</h1>
    
    <div class="preview" id="svg-container">
        <!-- SVG Code Here -->
        <svg width="512" height="512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="rased-icon">
          <defs>
            <linearGradient id="rased_grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#4338ca" />
              <stop offset="50%" stop-color="#6366f1" />
              <stop offset="100%" stop-color="#818cf8" />
            </linearGradient>
            <linearGradient id="gold_grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#f59e0b" />
              <stop offset="100%" stop-color="#fbbf24" />
            </linearGradient>
            <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
              <feGaussianBlur stdDeviation="15" result="blur" />
              <feComposite in="SourceGraphic" in2="blur" operator="over" />
            </filter>
            <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
              <feDropShadow dx="0" dy="10" stdDeviation="10" flood-opacity="0.3" />
            </filter>
          </defs>
          <rect x="20" y="20" width="472" height="472" rx="140" fill="url(#rased_grad)" filter="url(#shadow)" />
          <path d="M400 150 A 180 180 0 0 1 150 400" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="40" stroke-linecap="round" />
          <g transform="translate(106, 106) scale(0.6)">
              <path d="M250 50 C 140 50, 50 150, 50 250 C 50 350, 140 450, 250 450 C 360 450, 450 350, 450 250" fill="none" stroke="white" stroke-width="45" stroke-linecap="round"/>
              <path d="M170 240 L 230 300 L 350 160" fill="none" stroke="url(#gold_grad)" stroke-width="50" stroke-linecap="round" stroke-linejoin="round" filter="url(#glow)"/>
              <circle cx="350" cy="350" r="30" fill="white" opacity="0.9" />
          </g>
        </svg>
    </div>
    
    <button onclick="downloadPNG()">
        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" stroke-linecap="round" stroke-linejoin="round"/></svg>
        تحميل الأيقونة (PNG)
    </button>
    <p>بعد التحميل، استبدل ملف <code>icon.png</code> الحالي بهذا الملف.</p>

    <script>
        function downloadPNG() {
            const svg = document.getElementById('rased-icon');
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            const data = (new XMLSerializer()).serializeToString(svg);
            const DOMURL = window.URL || window.webkitURL || window;
            
            const img = new Image();
            const svgBlob = new Blob([data], {type: 'image/svg+xml;charset=utf-8'});
            const url = DOMURL.createObjectURL(svgBlob);
            
            img.onload = function () {
                ctx.clearRect(0, 0, 512, 512);
                ctx.drawImage(img, 0, 0);
                DOMURL.revokeObjectURL(url);
                
                const imgURI = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');
                
                const evt = new MouseEvent('click', {
                    view: window,
                    bubbles: false,
                    cancelable: true
                });
                
                const a = document.createElement('a');
                a.setAttribute('download', 'icon.png');
                a.setAttribute('href', imgURI);
                a.setAttribute('target', '_blank');
                
                a.dispatchEvent(evt);
            };
            
            img.src = url;
        }
    </script>
</body>
</html>